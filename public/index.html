<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>Assurly Reflex Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Poppins" />
    <script>
        function transformToAssocArray(prmstr) {
            var params = {};
            var prmarr = prmstr.split("&");
            for (var i = 0; i < prmarr.length; i++) {
                var tmparr = prmarr[i].split("=");
                params[tmparr[0]] = tmparr[1];
            }
            return params;
        }

        function getSearchParameters() {
            var prmstr = window.location.search.substr(1);
            return prmstr != null && prmstr != "" ? transformToAssocArray(prmstr) : {};
        }
        var params = getSearchParameters();
        if (params.assessmentId && params.serverId && params.combinedServerId) {
            let postUrl = `https://api.assur.ly/v15/reflex/callback`;
            let apiKey = `assurly-b539f812-bee0-4068-8ab9-c46d9b03521a`;
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = () => {
                if (xhr.status == 200) {
                    console.log("", xhr.responseType, xhr.responseText)
                }
                console.log("", xhr.responseType, xhr.responseText)
            }
            xhr.open("POST", postUrl, true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('X-Api-Key', apiKey);

            xhr.send(
                JSON.stringify({
                    body: {
                        "assessmentId": params.assessmentId,
                        "serverId": params.serverId,
                        "combinedServerId": params.combinedServerId,
                    }
                }));

            console.log('réussie');
        }
    </script>
    <style>
        .loader {
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 10%;
            border: 16px solid #f3f3f3;
            border-radius: 50%;
            border-top: 16px solid #ffc202;
            width: 100px;
            height: 100px;
            -webkit-animation: spin 2s linear infinite;
            /* Safari */
            animation: spin 2s linear infinite;
        }
        /* Safari */
        
        @-webkit-keyframes spin {
            0% {
                -webkit-transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
            }
        }
        
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        .head_text {
            font-weight: bold;
            text-align: center;
            font-size: 76px;
            color: #5630a3;
            padding-top: 35px;
        }
        
        .message {
            text-align: center;
            font-size: 50px;
            color: #19191a;
            padding-top: 35px;
        }
        
        body {
            display: block;
            margin: 15px;
            font-family: 'poppins-bold', sans-serif !important;
        }
        
        .image {
            margin-top: 100px;
            width: 900px;
            height: auto;
            align-items: center;
        }
        
        @media screen and (max-width:940px) {
            .head_text {
                font-weight: bold;
                text-align: center;
                font-size: 57px;
                color: #5630a3;
                padding-top: 35px;
            }
            .message {
                text-align: center;
                font-size: 45px;
                color: #19191a;
                padding-top: 35px;
            }
            .image {
                margin-top: 70px;
                width: 800px;
                height: auto;
                align-items: center;
            }
        }
        
        @media screen and (max-width:800px) {
            .head_text {
                font-weight: bold;
                text-align: center;
                font-size: 37px;
                color: #5630a3;
                padding-top: 35px;
            }
            .message {
                text-align: center;
                font-size: 27px;
                color: #19191a;
                padding-top: 35px;
            }
            .image {
                margin-top: 100px;
                width: 570px;
                height: auto;
                align-items: center;
            }
        }
        
        @media screen and (max-width:500px) {
            .head_text {
                font-weight: bold;
                text-align: center;
                font-size: 27px;
                color: #5630a3;
                padding-top: 35px;
            }
            .message {
                text-align: center;
                font-size: 19px;
                color: #19191a;
                padding-top: 35px;
                font-weight: bold;
            }
            .image {
                margin-top: 35px;
                width: 400px;
                height: auto;
                align-items: center;
            }
        }
        
        @media screen and (max-width:425px) {
            .head_text {
                font-weight: bold;
                text-align: center;
                font-size: 22px;
                color: #5630a3;
                padding-top: 35px;
            }
            .message {
                text-align: center;
                font-size: 17px;
                color: #19191a;
                padding-top: 35px;
                font-weight: bold;
            }
            .image {
                margin-top: 35px;
                width: 350px;
                height: auto;
                align-items: center;
            }
        }
        
        @media screen and (max-width:360px) {
            .head_text {
                font-weight: bold;
                text-align: center;
                font-size: 17px;
                color: #5630a3;
                padding-top: 35px;
            }
            .message {
                text-align: center;
                font-size: 13px;
                color: #19191a;
                padding-top: 35px;
                font-weight: bold;
            }
            .image {
                margin-top: 35px;
                width: 250px;
                height: auto;
                align-items: center;
            }
            .loader {
                display: block;
                margin-left: auto;
                margin-right: auto;
                margin-top: 10%;
                border: 13px solid #f3f3f3;
                border-radius: 50%;
                border-top: 13px solid #ffc202;
                width: 80px;
                height: 80px;
                -webkit-animation: spin 2s linear infinite;
                /* Safari */
                animation: spin 2s linear infinite;
            }
        }
        
        @media screen and (max-width:260px) {
            .head_text {
                font-weight: bold;
                text-align: center;
                font-size: 12px;
                color: #5630a3;
                padding-top: 35px;
            }
            .message {
                text-align: center;
                font-size: 8px;
                color: #19191a;
                padding-top: 35px;
                font-weight: bold;
            }
            .image {
                margin-top: 35px;
                width: 150px;
                height: auto;
                align-items: center;
            }
            .loader {
                display: block;
                margin-left: auto;
                margin-right: auto;
                margin-top: 10%;
                border: 10px solid #f3f3f3;
                border-radius: 50%;
                border-top: 10px solid #ffc202;
                width: 60px;
                height: 60px;
                -webkit-animation: spin 2s linear infinite;
                /* Safari */
                animation: spin 2s linear infinite;
            }
        }
        
        @media screen and (max-width:163px) {
            .head_text {
                font-weight: bold;
                text-align: center;
                font-size: 9px;
                color: #5630a3;
                padding-top: 35px;
            }
            .message {
                text-align: center;
                font-size: 8px;
                color: #19191a;
                padding-top: 35px;
                font-weight: bold;
            }
            .image {
                margin-top: 30px;
                width: 130px;
                height: auto;
                align-items: center;
            }
            .loader {
                display: block;
                margin-left: auto;
                margin-right: auto;
                margin-top: 10%;
                border: 10px solid #f3f3f3;
                border-radius: 50%;
                border-top: 10px solid #ffc202;
                width: 40px;
                height: 40px;
                -webkit-animation: spin 2s linear infinite;
                /* Safari */
                animation: spin 2s linear infinite;
            }
        }
        
        .container {
            display: flex;
            flex-direction: column;
            /*padding: 15px;*/
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <div>
            <p class="head_text">PLUS QUE QUELQUES SECONDES</p>
        </div>
        <div>
            <p class="message">Nous évaluons vos réponses pour vous donner le meilleur tarif!</p>
        </div>
        <div>
            <div class="loader"></div>
        </div>
        <div>
            <center><img src="Reflex.png" class="image" /></center>
        </div>
    </div>
</body>

</html>